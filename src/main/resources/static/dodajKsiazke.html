<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Dodaj Książkę</title>
    <style>
        #dodano
        {
            transition: opacity 1s ease;
            opacity:1;
        }
        .fade-out
        {
            opacity:0;
        }
    </style>


</head>
<body>
<input type="text" id="tytul" placeholder="Wpisz tytuł"/>
<input type="number" id="rok" placeholder="Wpisz rok"/>
<input type="text" id="autorId" placeholder="Wpisz ID autora">
<button onclick="dodajKsiazke()">Dodaj książkę</button>
<p id="dodano" style="color: black"></p>
<p id="error" style="color: red"></p>

<table id="tabela">
    <thead>
    <tr>
    <th>ID</th>
    <th>Imie i nazwisko</th>
    </tr>
    </thead>
</table>



<script>

    async function getAutorzy() {
        const response = await fetch('http://localhost:8080/api/autorzy',
            {
                method: 'GET',
                credentials: 'include',
            });
        const autorzy = await response.json();
        return autorzy;
    }

    async function wypiszAutorow() {

        const autorzy = await getAutorzy();
        const tabela = document.getElementById('tabela');

        for(let autor of autorzy)
        {
            const tr = document.createElement('tr');
            const autorId = document.createElement('td');
            const autorImieINazwisko = document.createElement('td');
            autorId.innerText = autor.id;
            autorImieINazwisko.innerText = autor.imie + " " + autor.nazwisko;
            tr.appendChild(autorId);
            tr.appendChild(autorImieINazwisko);
            tabela.appendChild(tr);

        }
    }
wypiszAutorow()
</script>

</body>
</html>